version: 2.1

jobs:
    deploy-infrastructure:
        docker:
          - image: amazon/aws-cli
        steps:
          - checkout
          - run:
              name: deploy infrastructure
              command: |
                aws cloudformation deploy \
                  --template-file .circleci/files/backend.yml \
                  --stack-name "challenge" \
                  --region=us-west-2

workflows:
  default:
    jobs:
        - deploy-infrastructure
